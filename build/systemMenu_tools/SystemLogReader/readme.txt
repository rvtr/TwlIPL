SystemLogReader
                                          2008.11.20 任天堂株式会社　開発技術部



＜概要＞
　本ツールは、本体内蔵メモリに格納しているシステムのエラーログをSDカードに取り
出すものです。
　本ツールは、何らかの不具合によってシステムメニューが起動しない状態になった場
合でもエラーログを取り出すことができます。但し、下記の場合には、エラーログを取
り出すことが出来ません。
　・CPUやメインメモリなど、プログラムの動作にに必須のHWが破損している場合。
  ・NANDのファイルシステム破損している場合。
　・エラーログファイルが破損している場合。

　なお、エラーログは、PC上のテキストエディタで確認することができます。



＜構成＞
memory_launcher_writer-FINALROM.prod.gcd　（SystemLogReadrファイル）



＜用意するもの＞
・磁石（正常な本体の動作中にXボタン付近の所定位置に配置すると、スリープがかかる
　位の磁力があるもの）
・DSフラッシュカード
・IS-NITRO-DEBUGGER



＜使い方＞

１．プログラムの書き込み
　１−１．
　　IS-NITRO-DEBUGGERを起動して、「読み込み」コマンドの「BIN」を開き、
　　　「読み込み後にリセットを行う」
　　　「読み込み後に両方のプロセッサを実行する」
　　のチェックを外します。
    ※IS-TWL-DEBUGGERでは書き込みを行うことができません。
　１−２．
　　memory_launcher_writer-FINALROM.prod.gcdファイルをエミュレーションメモリの
　　アドレス0x00000000に読み込みます。
　１−３．
　　DSフラッシュカードをIS-NITRO-DEBUGGERのカードスロットに挿入します。
　　（TWLフラッシュカードへの書き込みはまだサポートされていません。）
　１−４．
　　「ツール」−「DSフラッシュカード」を選択し、書き込みサイズを「ユーザー指定」
　　で16MBitに指定して書き込みを行います。



２．起動
　２−１．
　　１．でSystemLogReaderを書き込んだDSフラッシュカードを本体のカードスロットに
　　挿入します。また、SDカードを本体のSDカードスロットに挿入します。
　２−２．
　　磁石を本体Xボタン付近の正常な本体の場合にスリープがかかる位置に配置し、
　　「SELECTボタン＋STARTボタン＋Xボタン」
　　を押しながら電源投入します。
　２−３．
　　"NAND FIRM WRITER"を経由して"System Log Writer"が起動し、SDカードにエラーロ
　　グファイルを出力して停止します。
　　※起動したプログラム上でエラーログを確認することはできません。



３．出力ファイル
　「本体シリアルナンバー.log」の形式でSDカードのルートに本体から取り出したエラ
ーログファイルが作成されます。
　なお、本体内蔵メモリの本体シリアルNo.を格納しているファイルが破損していた場合
は、本体に関係なく「.log」というファイル名となります。



４．エラーログの内容
　エラーログは、下記のようなフォーマットで最大64個まで格納されています。
　日付、時刻は本体のRTCの値となるため、エラーが発生した実時間とは一致しない可能
性があります。

  |-----------------------------------------------------------------|
  | 　#FFT 日付[曜日] 時刻                                          |
  | 　title: エラーが発生したプログラムのイニシャルコード           |
  | 　エラー内容の詳細                                              |
  |-----------------------------------------------------------------|

　なお、エラーログは、システムメニューが不正なプログラムを起動しようとした際や
無線通信に失敗した際にもログを残すようになっていますので、全てのログが不具合解
析に有用であるとは限りません。

　下記にサービスセンターで有用と思われるエラーログの例を挙げます。


　・無線モジュール不具合
　　#FFT 00-01-29[SAT] 00:02:07
　　title: HNAJ
　　menuRedIplManager.cpp [l.466] WLFIRM 2 (00030015484e424a) 


　・カメラモジュール不具合（下記以外の"CAMERA **"含む）
　　#FFT 00-01-01[SAT] 00:12:08
　　title: HNAJ
　　menuCameraManager.cpp [l.369] CAMERA INIT 8


　・NAND劣化不具合
　　#FFT 00-01-29[SAT] 00:02:07
　　title: HNAJ
　　menuSystem.cpp [l.709] RED FATAL 0000000000000002 (BT 00030015484e424a)
    err:FATAL_ERROR_NAND


　・本体内蔵メモリのHWノーマル情報破損
　　#FFT 00-01-01[SAT] 00:12:08
　　title: HNAJ
　　menuSystem.cpp [l.709] RED FATAL 0000000000000004 (BT 00030015484e424a)
　　err:FATAL_ERROR_HWINFO_NORMAL


　・本体内蔵メモリのHWセキュア情報破損
　　#FFT 00-01-01[SAT] 00:12:08
　　title: HNAJ
　　menuSystem.cpp [l.709] RED FATAL 0000000000000008 (BT 00030015484e424a)
　　err:FATAL_ERROR_HWINFO_SECURE


　・本体内蔵メモリの本体設定データ破損
　　#FFT 00-01-01[SAT] 00:12:08
　　title: HNAJ
　　menuSystem.cpp [l.709] RED FATAL 0000000000000010 (BT 00030015484e424a)
　　err:FATAL_ERROR_TWLSETTINGS


　・本体内蔵メモリの無線ファームファイル破損
　　#FFT 00-01-01[SAT] 00:12:08
　　title: HNAJ
　　menuSystem.cpp [l.709] RED FATAL 0000000000000040 (BT 00030015484e424a)
　　err:FATAL_ERROR_WLANFIRM_AUTH


　・本体内蔵メモリの共有フォントファイル破損
　　#FFT 00-01-03[MON] 17:56:18
　　title: HNBJ
　　stgSystem.cpp [l.704]                                                                                                                                                           



===============================================================================
更新履歴

2008.11.20		初版発行

